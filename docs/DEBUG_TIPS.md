# ๐ก ูฺฉุงุช ููู ุจุฑุง Debug

## ูุดฺฉู: ฺฏุฑ ฺฉุฑุฏู ุฏุฑ `runtimeยทgoexit1`

### ฺุฑุง ุงู ุงุชูุงู ูโุงูุชุฏุ

ููุช ุฏุฑ ุญุงูุช debug ูุณุชุฏ ู ุจุฑูุงูู ุฏุฑ `runtime/asm_amd64.s:1693` (ุง `goexit1`) ฺฏุฑ ูโฺฉูุฏุ ุงู **ุทุจุน** ุงุณุช ู ูุดฺฉู ูุณุช!

**ุฏูุงู:**

1. **Goroutine Background**: ุฏุฑ `internal/server/server.go` ุฎุท 37ุ ฺฉ goroutine ุจุง `go func()` ุดุฑูุน ูโุดูุฏ:
   ```go
   go func() {
       // HTTP server ุฏุฑ ุงู goroutine ุงุฌุฑุง ูโุดูุฏ
       s.httpServer.ListenAndServe()
   }()
   ```

2. **Debugger Thread Switching**: Debugger ููฺฉู ุงุณุช ุจู thread/goroutine ุฏฺฏุฑ switch ฺฉูุฏ ฺฉู ุฏุฑ ุญุงู ูพุงุงู ุงุณุช

3. **Runtime Cleanup**: ููุช ฺฉ goroutine ุจู ูพุงุงู ูโุฑุณุฏุ Go runtime ุขู ุฑุง cleanup ูโฺฉูุฏ ู ุจู `goexit1` ูโุฑูุฏ

### ุฑุงูโุญูโูุง

#### ุฑุงูโุญู 1: Continue (F5)

ุณุงุฏูโุชุฑู ุฑุงู: ููุท `F5` ุฑุง ูุดุงุฑ ุฏูุฏ ุชุง debug ุงุฏุงูู ุงุจุฏ. ุจุฑูุงูู ุดูุง ูููุฒ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช!

#### ุฑุงูโุญู 2: ุงุณุชูุงุฏู ุงุฒ Call Stack

1. ุฏุฑ ูพูู **Call Stack** (ุณูุช ฺูพ) ฺฉูฺฉ ฺฉูุฏ
2. ุฑู frame ูุฑุจูุท ุจู ฺฉุฏ ุฎูุฏุชุงู ฺฉูฺฉ ฺฉูุฏ (ูุซูุงู `main.main` ุง `server.Start`)
3. ุจู ฺฉุฏ ุฎูุฏุชุงู ุจุฑูโฺฏุฑุฏุฏ

#### ุฑุงูโุญู 3: Skip Runtime Files

ุฏุฑ `.vscode/launch.json` ุชูุธูุงุช ุฒุฑ ุงุถุงูู ุดุฏู ุงุณุช:
```json
"skipFiles": [
  "<runtime>",
  "<autogenerated>"
]
```

ุงู ุจุงุนุซ ูโุดูุฏ debugger ุงุฒ ูุงูโูุง runtime ุนุจูุฑ ฺฉูุฏ.

#### ุฑุงูโุญู 4: Breakpoint ุฏุฑ ฺฉุฏ ุฎูุฏุชุงู

ุจู ุฌุง ุงูฺฉู debugger ุฎูุฏุด ูุชููู ุดูุฏุ breakpoint ุฏุฑ ฺฉุฏ ุฎูุฏุชุงู ูุฑุงุฑ ุฏูุฏ:

1. ุฏุฑ `cmd/server/main.go` ุฎุท 89 (ุจุนุฏ ุงุฒ `srv.Start()`) ฺฉ breakpoint ูุฑุงุฑ ุฏูุฏ
2. ุง ุฏุฑ `internal/api/handlers.go` ุฏุฑ handler ููุฑุฏ ูุธุฑ

---

## ูฺฉุงุช ููู Debug

### 1. ุจุฑูุงูู ุดูุง ูููุฒ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช!

ููุช ุฏุฑ `goexit1` ฺฏุฑ ูโฺฉูุฏุ ุจุฑูุงูู ุดูุง **ูููุฒ ุฏุฑ ุญุงู ุงุฌุฑุง** ุงุณุช. ููุท debugger ุจู thread ุฏฺฏุฑ ุฑูุชู ุงุณุช.

**ุจุฑุฑุณ:**
```bash
# ุฏุฑ terminal ุฏฺฏุฑ
curl http://localhost:8080/health
# ุจุงุฏ ูพุงุณุฎ ุจฺฏุฑุฏ!
```

### 2. ุงุณุชูุงุฏู ุงุฒ Call Stack

ููุดู ุงุฒ **Call Stack** ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ุจุจูุฏ ฺฉุฌุง ูุณุชุฏ:
- ุงฺฏุฑ ุฏุฑ runtime ูุณุชุฏุ ุจู frame ุจุงูุงุชุฑ ุจุฑูุฏ
- ุจู frame ูุฑุจูุท ุจู ฺฉุฏ ุฎูุฏุชุงู ุจุฑูุฏ

### 3. Breakpoints ููุดููุฏ

ุจูุชุฑ ุงุณุช breakpoint ุฏุฑ ฺฉุฏ ุฎูุฏุชุงู ูุฑุงุฑ ุฏูุฏ ุชุง ุฏุฑ runtime ฺฏุฑ ูฺฉูุฏ:

**ูุซุงู:**
- ุฏุฑ `HelloHandler` ฺฉ breakpoint ูุฑุงุฑ ุฏูุฏ
- ฺฉ request ุจูุฑุณุชุฏ
- ุจุฑูุงูู ุฏุฑ handler ุดูุง ูุชููู ูโุดูุฏ (ูู ุฏุฑ runtime)

### 4. Watch Expressions

ุงุฒ **Watch** ุงุณุชูุงุฏู ฺฉูุฏ ุชุง variables ุฑุง monitor ฺฉูุฏ:
- `cfg.Server.Port`
- `lifecycleMgr.GetState()`

---

## ูุซุงู ุนูู

### ุณูุงุฑู: Debug ฺฉ API Request

1. **ุดุฑูุน Debug:**
   - `F5` ุฑุง ูุดุงุฑ ุฏูุฏ
   - ุจุฑูุงูู ุดุฑูุน ูโุดูุฏ

2. **ุงฺฏุฑ ุฏุฑ `goexit1` ฺฏุฑ ฺฉุฑุฏุฏ:**
   - ูฺฏุฑุงู ูุจุงุดุฏ!
   - `F5` ุฑุง ูุดุงุฑ ุฏูุฏ (Continue)
   - ุง ุงุฒ Call Stack ุจู `main.main` ุจุฑฺฏุฑุฏุฏ

3. **ูุฑุงุฑ ุฏุงุฏู Breakpoint:**
   - ุฏุฑ `internal/api/handlers.go` ุฎุท 74 (`HelloHandler`) breakpoint ูุฑุงุฑ ุฏูุฏ

4. **ุงุฑุณุงู Request:**
   ```bash
   curl http://localhost:8080/hello
   ```

5. **Debug:**
   - ุจุฑูุงูู ุฏุฑ handler ุดูุง ูุชููู ูโุดูุฏ
   - ูโุชูุงูุฏ variables ุฑุง inspect ฺฉูุฏ
   - `F10` ุจุฑุง step over
   - `F5` ุจุฑุง continue

---

## ุชูุธูุงุช ูพุดููุงุฏ

ุฏุฑ `.vscode/launch.json` ุงู ุชูุธูุงุช ุงุถุงูู ุดุฏู ุงุณุช:

```json
{
  "skipFiles": [
    "<runtime>",
    "<autogenerated>"
  ],
  "stopOnEntry": false
}
```

ุงู ุจุงุนุซ ูโุดูุฏ:
- ุงุฒ ูุงูโูุง runtime ุนุจูุฑ ฺฉูุฏ
- ุฏุฑ entry point ูุชููู ูุดูุฏ

---

## ุฎูุงุตู

โ **ุงู ุทุจุน ุงุณุช** - ูฺฏุฑุงู ูุจุงุดุฏ!
โ ุจุฑูุงูู ุดูุง **ูููุฒ ุฏุฑ ุญุงู ุงุฌุฑุง** ุงุณุช
โ ููุท `F5` ุฑุง ูุดุงุฑ ุฏูุฏ ุง ุงุฒ Call Stack ุงุณุชูุงุฏู ฺฉูุฏ
โ Breakpoint ุฏุฑ ฺฉุฏ ุฎูุฏุชุงู ูุฑุงุฑ ุฏูุฏ

**ูููู ุจุงุดุฏ! ๐**

